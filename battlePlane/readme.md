# 飞机大战开发总结  
轮子哥说的对，代码这种东西，光学不写是不行的。只有写了才能够踩到自己不认识的坑。才能总结出来属于自己的经验。  
总结一下自己开发的飞机大战  
### 飞机大战讲解  
刚开始纠结于怎么创建对象，后来经过考虑，总共大概创建了三种对象  
* 飞机对象  
    也就是玩家的飞机，具有move、shoot功能  
* 敌机对象  
    敌机对象继承了飞机对象的方法和属性，但是同时也定义了自己的属性，增加了一个destory的方法用来销毁自身，同时也加了自动移动的功能。  
* 子弹对象  
    子弹对象刚开始想写成独立的对象，后来觉得把子弹当做飞机内部的一个属性处理起来更方便  
* 游戏GAME  
    GAME对象中间主要来做逻辑部分。碰撞检测和分数计算  
### 开发中遇到的问题  
* 异步处理问题  
    刚开始渲染页面时候，自己使用的是创建一个img对象，然后通过img对象的onload属性来进行绘制页面，结果导致每次绘制页面上的元素就异步加载了那么多的图片，导致页面返回的时候，已经过了当前帧了，下一帧又开始执行。导致页面的清空当前画布时间远大于页面渲染时间。页面一直是白屏。  
    解决方法： 把所需要的图片素材一次性加载，后面就不用在重复加载了  
* this的指向问题  
    forEach方法的第二个参数是指定作用于，不传的话默认指向了window(好像)。于是总是会报错  
* 修改原型链  
    使用老师视频中的inheritPrototype方法来继承父类的方法，结果不生效，经过定位后发现，这个修改原型链好像不能修改已经实例化的对象。所以这部分内容应该放在实例化之前。不然无法生效  
### 遗留的问题  
    emmmmm功能确实开发完了，但是有个优化问题需要解决，发现我的页面敌机在销毁时，敌机附近的敌机会出现闪烁的现象。暂时还没有定位到问题出现在哪里。  
    敌机销毁逻辑： 判断敌机状态，如果是destorying则切换需要渲染的图片，并增加一个属性count。没渲染一帧count++，当count为3时则已经渲染了三帧销毁画面了。然后将此敌机从敌机列表中删除；  
    猜测：自己的代码性能不好，不能在一帧内执行完成导致页面的渲染顺序出现问题。